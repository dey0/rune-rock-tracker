<!DOCTYPE html>
<html>
<head>
	<style>
		.table td {
		   text-align: center;   
		}
	</style>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.0/moment.min.js"></script>
	<script>
		// changes:
		// add: queue of worlds
		// split up rocks
		window.onload = function() {
			var worlds = [2,3,4,5,6,7,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,36,37,38,39,40,41,42,43,44,46,46,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,65,66,67,68,69,70,73,74,75,76,77,78,86,86,87,88,89,90,91,92];
			var rows = Math.floor((worlds.length + 3) / 4);
			var table = document.getElementById("runite");
			
			for (var x = 0; x < rows; x++) {
				var row = table.insertRow();
				row.scope = "row";
				
				
				createCell(row, 300 + worlds[x]);
				createCell(row, 300 + worlds[x + rows]);
				createCell(row, 300 + worlds[x + rows * 2]);
				if (x + rows * 3 < worlds.length)
					createCell(row, "3" + worlds[x + rows * 3]);
			}
		}
		
		function createCell(row, innerHTML) {
			var cell = row.insertCell();
			cell.innerHTML = innerHTML;
			cell.onclick = function() {
				var worldId = innerHTML;
				cell.className = "";
				cell.style = "background-color: #666666";
				cell.respawnTime = moment().add(1000 * 60 * 12, "milliseconds");
				setTimeout(function() { cell.style = style; }, 1000 * 60 * 12);
				cell.innerHTML = innerHTML + " - " + timestampToString(1000 * 60 * 12);
				var interval = setInterval(function() {
					var remaining = cell.respawnTime.diff(moment());
					if (remaining <= 0) {
						clearInterval(interval);
						cell.innerHTML = innerHTML;
						cell.className = "bg-info";
					} else {
						cell.innerHTML = innerHTML + " - " + timestampToString(remaining);
					}
				}, 300);
			}
		}
		
		function timestampToString(ts) {
			var m = Math.floor(ts / 60000);
			var s = Math.floor((ts % 60000) / 1000).toString();
			if (s.length == 1)
				s = "0" + s;
			return m + ":" + s;
		}
	</script>
</head>
<body>
	<center>
	<h1>Rune Rock Tracker</h1>
	<div id="container" style="width: 600px" >
		<table id="runite" class="table table-sm table-bordered table-active" style="table-layout: fixed"></table>
	</div>
	</center>
</body>
</html>